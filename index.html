<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Themes</title>
    <link rel="shortcut icon" href="Dash.png"/>
<!-- ################################################################## -->
<!--                           READ ME FIRST                            -->
<!-- ################################################################## --> <!--

Copyright:                 

    o Copyright: ¬© 2022 Jackie.Blue
    o Full copyright privledges until Open Source license is established

Purpose:                   

    o Provide user controls to create and change CSS attributes :root --variable-names and values
    o Update attribute edit panels to reflect the attribute values and controls for a selected user element
    o Display all css :root variable names and values as a CSS theme for user cut and paste.

Focus areas                

    o prefer words instead of abbreviatons for open source clarity and readability
    o pure js so not to add additional libraries, dependencies, and complexity.  KISS 
    o all attributes in a CSS tag, name, and class will referece :root theme --variables
    o all actual CSS attribute values are listed for quick editing in the css :root section
    o one click navigation selling poinnt, two clicks if a selection or menu is required.  
    o no images.  System icons will utilize the unicode emoji character set
        a collection of common emojis are provided at the end of this document for reference

    o code format is personal for editor collapse and block edit functions..
          there no requirements to follow my code preferences.   

Naming Convetions:         

    myVar               : javascript function or variable name
    var_name            : javascript function or variable name for readability
    _field_name         : DOM object field for storing parameters passed to or used by event handelers
    myElement           : css class, id, or tag name        i.e. .myTitle { }
    --font-size         : default :root variable name       i.e. --color
    --myElem-font-size  : class :root variable name         i.e. --button-font-size
    --sys-elem-font-size: system theme :root variable name  i.e. --sys-button-font-size
    --myElem-color_id   : used in associated html elementa id= or a collection name= for js reference
                          attribute and variable names are used to generate unique id= names like id='--title-color'
                          suffixs are also added to denote different system elements for the same attribute  
                                                            i.e. <..id='font-size_default_value'>  
                                                                 <..id='font-size_undo_value'>

Initial Theme and Classes: 

    o Provided :root variables defined in themes.css are overridden by local storage user changes on page reload
    o Output from the Theme Generator may be used to replace defauls in themes.css 

    o Themes and classes for shown system elements [labels, knobs, status] are stored in the style section of this html document
    o User area element themes and classes are stored in the themes.css file
    o User and system themes are separated to prevent user theme changes from affecting system elements
    o Both initial themes are represented by :root variable values in the themes.css file
    o Default css root variable names like '--color' describe the themes default attribute values.
    o Attribute values for a given css class like 'title {}' may optionly and initially specify a 
        default variable name to share a setting across css classes like 'div, span {font-size: var(--font-size)}'
    o Attribute values for a given css class like 'title {}' may optionly and initially specify a 
        variable name unique to the class and not shared like 'title {font-size: var(--title-font-size)}'
    o Each element contains variables for only one shadow, transform, etc.  Optionaly create multiple shadows
        in its own class and assign both the element and appropriate shadow classes to the HTML element 

Main Event Handlers:       

    genEdit()       - generate HTML for all system attribute edit panels with associated attributes for 
                         a selected user element event
    gen....()       - like above, generate HTML and/or fill in values for popups
    chgAttr()       - change the value of a single themed attribute variable in css :root and display the results 

    o See the console.log for event function() calls, parameters, and flow
    o See 'function() PARAMETERS' description at the beginning of the javascript section
    o See comments before each function() for function design notes, specifications, and flow

Main Parameters:           

    context         - a string denoting a specific class, id, or tag name i.e. button, title, innerGrid
                    - only one context at a time.  Edit a title or a button, not both at the same time. 
    attr_ctrl       - object containg an attributes associated attribute options list or numerical limits
    var_name        - associated attribute variable names prefix i.e. --button-background-color, --title-font-size
                                                                        -->

<!-- ################################################################## -->
<!--                      SYSTEM ELEMENTS <STYLE>                       -->
<!-- ################################################################## -->

    <link  rel="stylesheet" href="themes.css">

    <style type="text/css" >
    /* ----------------------------------------------------------- intro

        system elements are all elements displayed outside the users themed results area  
        see themes.css for user area classes and variables 

        A system theme is provided here being separate and unaffected by user theme changes

        All tag and class elements in this section may be replaced to
        change the layout and theme of system elements.

        Unlike my inexperienced quick hack below, all attribue values are to use 
        available var(--sys..) where all actual values are contained in css :root.

        The system class name format is     .sysElemName
        The system variable name format is  --sys-attribute-name or --sys-className-attribute-name 

        ---------------------------------------------------------- */ 

        /* SYSTEM THEME VARIABLES */
        html[data-theme = 'system'] {
            /* system                   */

                    --sys-color:                   var(--sys-white);
                    --sys-background-color:        var(--sys-greyBg);
                    --sys-hover-color:             var(--sys-red);
                    --sys-font-size:               18px;
                    --sys-small:                   18px;
                    
                    --sys-font-style:              normal;
                    --sys-font-family:             Candara;
                    --sys-text-align:              left;
                    --sys-text-indent:             0px;
                    --sys-line-height:             1.10; /* space between lines, 1.1 default */

                    --sys-fancy:                   Gabriola; 
                    --sys-title:                   calibri; 
                    --sys-desc:                    'Copperplate Gothic'; 
                    --sys-text:                    Candara; 

                    --sys-back:                    '‚óÄ';
                    --sys-pointU:                  'ü†ù';     
                    --sys-pointL:                  'ü†ú';
                    --sys-pointR:                  'ü†û';
                    --sys-pointD:                  'ü†ü';

                    --sys-white:                   #c0c0c0; 
                    --sys-black:                   #000000; 
                    --sys-grey:                    ; 
                    --sys-red:                     #ed143d;  
                    --sys-green:                   #90ee90;
                    --sys-blue:                    #00bfff;
                    --sys-yellow:                  #daa520;
                    --sys-purple:                  #8a2be2;
                    --sys-brown:                   #492222;

                    --sys-redBg:                   #8b0000;  
                    --sys-greenBg:                 #6b8e23;
                    --sys-blueBg:                  #1f1f72;
                    --sys-yellowBg:                #6a4520;
                    --sys-purpleBg:                #8a2be2;
                    --sys-greyBg:                  #0D0D20; 
            /* sys-title                */
                    --sys-title-font-family   :  var(--sys-title); 
                    --sys-title-font-size     :  36px;
                    --sys-title-font-weight   :  400; 
                    --sys-title-font-style    :  normal;
                    --sys-title-color         :  var(--sys-color);
                    --sys-title-background-color :  transparent;
                    --sys-title-text-align    :  left;
                    --sys-title-margin-top    :  0;
                    --sys-title-margin-bottom :  0;
                    --sys-title-margin-left   :  0;
                    --sys-title-margin-right  :  0;
                    --sys-title-padding-top   :  0;   
                    --sys-title-padding-bottom:  0;   
                    --sys-title-padding-left  :  0;   
                    --sys-title-padding-right :  0;
                    --sys-title-line-height   :  1.1; 
            /* sys-header               */

                    --sys-header-background-color: #492222; 
            /* sys-desc                 */
                    --sys-desc-font-family    :  var(--sys-desc); 
                    --sys-desc-font-size      :  20px;
                    --sys-desc-font-weight    :  400; 
                    --sys-desc-font-style     :  normal;
                    --sys-desc-color          :  var(--sys-yellow);
                    --sys-desc-background-color: transparent;
                    --sys-desc-text-align     :  left;
                    --sys-desc-margin-top     :  0;
                    --sys-desc-margin-bottom  :  0;
                    --sys-desc-margin-left    :  0;
                    --sys-desc-margin-right   :  0;
                    --sys-desc-padding-top    :  0;   
                    --sys-desc-padding-bottom :  0;   
                    --sys-desc-padding-left   :  0;   
                    --sys-desc-padding-right  :  0;
                    --sys-desc-line-height    :  1.1; 
            /* sys-button               */
                    --sys-button-font-family    :  var(--sys-desc); 
                    --sys-button-font-size      :  18px;
                    --sys-button-font-weight    :  400; 
                    --sys-button-font-style     :  normal;
                    --sys-button-color          :  var(--sys-yellow);
                    --sys-button-background-color: var(--sys-brown);
                    --sys-button-text-align     :  left;
                    --sys-button-margin-top     :  0;
                    --sys-button-margin-bottom  :  0;
                    --sys-button-margin-left    :  0;
                    --sys-button-margin-right   :  3px;
                    --sys-button-padding-top    :  3px;   
                    --sys-button-padding-bottom :  3px;   
                    --sys-button-padding-left   :  6px;   
                    --sys-button-padding-right  :  6px;
                    --sys-button-border-style   :  none;
                    --sys-button-borderWidth    :  0px;
                    --sys-button-line-height    :  1.1; 
            /* sys-input                */
                    --sys-input-font-family    :  var(--sys-desc); 
                    --sys-input-font-size      :  14px;
                    --sys-input-font-weight    :  400; 
                    --sys-input-font-style     :  normal;
                    --sys-input-color          :  var(--sys-white);
                    --sys-input-borderColor    :  var(--sys-white);
                    --sys-input-borderWidth    :  0px;
                    --sys-input-background-color: transparent;
                    --sys-input-text-align     :  left;
                    --sys-input-margin-top     :  0;
                    --sys-input-margin-bottom  :  0;
                    --sys-input-margin-left    :  0;
                    --sys-input-margin-right   :  0;
                    --sys-input-padding-top    :  0;   
                    --sys-input-padding-bottom :  0;   
                    --sys-input-padding-left   :  0;   
                    --sys-input-padding-right  :  0;
                    --sys-input-line-height    :  1.1;
                    --sys-input-border         :  none;
                    --sys-input-padding        :  0;   
            }


        /* SYSTEM GRIDs  */
            .infoLinksGrid   { 
                margin-bottom:          8px; 
                padding:                8px;
                display:                grid;
                grid-template-rows:     1fr;
                grid-template-columns:  1fr 1fr 1fr 1fr;
                grid-gap:               8px;
                justify-items:          stretch;
                }
            .infoDescGrid    { 
                margin-bottom:          8px; 
                padding:                8px;
                display:                grid;
                grid-template-rows:     1fr;
                grid-template-columns:  1fr 1fr 2fr;
                grid-gap:               8px;
                justify-items:          stretch;
                }
            .editColumnsGrid { 
                margin-bottom:          25px; 
                padding:                8px;
                display:                grid;
                grid-template-rows:     1fr;
                grid-template-columns:  auto auto  0.6fr;
                grid-gap:               8px;
                justify-items:          stretch;
                align-items:            stretch;
                }
            .splitGrid       { 
                width:                  100%; 
                display:                grid;
                grid-template-rows:     1fr;
                grid-template-columns:  1fr 1fr;
                grid-gap:               8px;
                }

        /* SYSTEM .CLASS */
            .sysFancy               { font-family:        var(--sys-fancy); }       /* remove usage */
            .sysSmall               { font-size:          var(--sys-small); }       /* used? */
            .sysText                { font-family:        var(--sys-font-family);   /* needed? used?*/
                                  font-size:          var(--sys-font-size); 
                                  color:              var(--sys-color); } 
            .system, .sysText       {
                                  font-family:        var(--sys-font-family); 
                                  font-style:         var(--sys-font-style); 
                                  font-size:          var(--sys-font-size);
                                  color:              var(--sys-color);
                                  background-color:   var(--sys-background-color);
                                  text-indent:        var(--sys-text-indent);
                                  line-height:        var(--sys-line-height);
                                  }
            .sysInput               { border-width:       var(--sys-input-borderWidth);
                                  border            : var(--sys-input-border );
                                  padding           : var(--sys-input-padding);
                                  -webkit-appearance: none;
                                }
            .sysHeader              { background-color:   var(--sys-header-background-color);
                                      font-family:        var(--sys-desc-font-family);
                                      width:              100%;
                                    }
            .sysTitle, .sysBack     {
                                  font-family    :    var(--sys-title-font-family   ); 
                                  font-size      :    var(--sys-title-font-size     );
                                  font-weight    :    var(--sys-title-font-weight   );
                                  font-style     :    var(--sys-title-font-style    );
                                  color          :    var(--sys-title-color         );
                                  text-align     :    var(--sys-title-text-align    );
                                  margin-top     :    var(--sys-title-margin-top    );
                                  margin-bottom  :    var(--sys-title-margin-bottom );
                                  margin-left    :    var(--sys-title-margin-left   );
                                  margin-right   :    var(--sys-title-margin-right  );
                                  padding-top    :    var(--sys-title-padding-top   );   
                                  padding-bottom :    var(--sys-title-padding-bottom);   
                                  padding-left   :    var(--sys-title-padding-left  );   
                                  padding-right  :    var(--sys-title-padding-right );
                                  line-height    :    var(--sys-title-line-height   ); 
                                  background-color:   var(--sys-title-background-color);
                        }
            .sysDesc                {
                                  font-family    :    var(--sys-desc-font-family   ); 
                                  font-size      :    var(--sys-desc-font-size     );
                                  font-weight    :    var(--sys-desc-font-weight   );
                                  font-style     :    var(--sys-desc-font-style    );
                                  color          :    var(--sys-desc-color         );
                                  background-color:   var(--sys-desc-background-color);
                                  text-align     :    var(--sys-desc-text-align    );
                                  margin-top     :    var(--sys-desc-margin-top    );
                                  margin-bottom  :    var(--sys-desc-margin-bottom );
                                  margin-left    :    var(--sys-desc-margin-left   );
                                  margin-right   :    var(--sys-desc-margin-right  );
                                  padding-top    :    var(--sys-desc-padding-top   );   
                                  padding-bottom :    var(--sys-desc-padding-bottom);   
                                  padding-left   :    var(--sys-desc-padding-left  );   
                                  padding-right  :    var(--sys-desc-padding-right );
                                  line-height    :    var(--sys-desc-line-height   ); 
                                  justify-items :     stretch;
                        }
            .sysLargeButton         { font-size: 32px; }
            .sysButton, .sysLargeButton               {
                                  border-style   :  var(--sys-button-border-style);
                                  background-color: var(--sys-button-background-color);
                                  color:            var(--sys-button-color);
                                  font-weight:      var(--sys-button-font-weight);
                                  margin-top     : 0px;
                                  margin-bottom  : 0px;
                                  margin-left    : var(--sys-button-margin-left   );
                                  margin-right   : var(--sys-button-margin-right  );
                                  padding-top    : var(--sys-button-padding-top   );  
                                  padding-bottom : var(--sys-button-padding-bottom);  
                                  padding-left   : var(--sys-button-padding-left  );   
                                  padding-right  : var(--sys-button-padding-right );
                                  border-radius  : 40px;
                                  border-style   : var(--sys-button-border-style);
                                  border-width   : var(--sys-button-borderWidth );
                        }
            .sysSelect              {
                                  font-family    :  var(--sys-desc-font-family   );
                                  color          :  var(--sys-button-color);
                                  background-color: var(--sys-button-background-color);
                                  font-weight    :  var(--sys-button-font-weight);
                                  border-style   :  var(--sys-button-border-style);
                                  border-width   :  var(--sys-button-borderWidth );
                                  /*font-size:        var(--desc-txt-height); */
                              }
            .sysBack                {                                                        /* used? */
                                  content:            var(--sys-pointL);  
                                }
            .sysMargin              { margin-bottom  :    25px;                          }   /* used? */
            .sysHover:hover         { color:              var(--sys-hover-color)  ;              
                                  transition:         0.3s;                          
                                }
            .sysCenter              { text-align:         center;
                                  align-content: center;
                                  align-items:   center;
                                }
            .sysTabBorder           { padding-left:       3px;
                                  margin-left:       3px;
                                  border-style:       solid none none solid;
                                  border-width:       1px;
                                  border-top-color:   var(--sys-yellow);
                                  border-left-color:  var(--sys-yellow);
                                }
            .sticky                 { position: fixed;
                                  top: 0;
                                  width: 100%;
                                }
            .sticky + .content      { padding-top: 60px; } /* jerk prevention */
            .userEditResult  { 
                float:                  left;
                width:                  100vw;
                padding:                3px; 
                border-style:           solid;
                border-color:           var(--sys-background-color);
                }
    </style>

</head>
<!-- ################################################################## -->
<!--                                HTML                                -->
<!-- ################################################################## -->
<body onload="bodyLoaded()">
<!-- ------------------------------------------------------------------ -->
<!--                            SPLASH SCREEN                           -->
<!-- ------------------------------------------------------------------ -->
<div id="splashScreen" hidden>                                          splash screen
    <div class="sysBlue sysFancy center">
        <em style="font-size: 60px;">                                   Jackie.Blue logo</em>
        <br><button class='sysLargeButton' onclick="hideId('splashScreen'); 
                                                   showEdit('');">      Show Editor</button>
        </div>
    </div>
<!-- ------------------------------------------------------------------ -->
<!--                            WAIT - WORKING ON IT ANIMATION          -->
<!-- ------------------------------------------------------------------ -->
<div id="wait">                                                         waiting
    <div class="center">
        <div style="font-size: 60px;">                                  WORKING INDICATOR...</div>
        <button class='sysLargeButton' onclick="p('-'); hideId('wait'); showId('splashScreen')">Show Splashscreen</button>
        </div>
    </div>
<!-- ------------------------------------------------------------------ -->
<!--                            SYSTEM EDIT MENU      - top left        -->
<!-- ------------------------------------------------------------------ -->
<div id='sysMenu' class="system" hidden>
    <span style='width: 97vw;'>
        <span onclick="showId('')"              class='sysTabBorder sysRed '>                Color Palette      </span> 
        <span onclick="showId('')"              class='sysTabBorder sysRed '>                New Element        </span> 
        <span onclick="showId('displayCSS')"    class='sysTabBorder sysRed '>                Generate CSS       </span>
        <span onclick="showId('')"              class='sysTabBorder sysBlue'>                Course             </span> 
        <span onclick="showId('')"              class='sysTabBorder sysBlue'>                About              </span> 
        </span>
    <copyright style='position: absolute; right: 10px;'class='sysFancy sysBlue' 
             onclick="hideId('gui-panel');hideId('sysMenu');showId('splashScreen')">    ¬© 2022 <em>Jackie.Blue </em></copyright>
    </div>
<!-- ------------------------------------------------------------------ -->
<!--                            EDITOR SECTION & DROP ZONE              -->
<!-- ------------------------------------------------------------------ -->
<div id='gui-panel' hidden class='userEditResult' ondragover="dropZone(event)" ondrop="dropElement(event)"
                           style='position: absolute; top: 25px; left: 0; width: 50vw; height: 100vh;  z-index: 0;'>  
    <!-- -------------------------------------------------------------- -->
    <!--                        POPUPS                                  -->
    <!-- -------------------------------------------------------------- -->
    <div id='attribute-popup' class='system' draggable='true' ondragstart='dragElement(event)' hidden
                             style=" z-index: 6; position: relative; top: 20px; left: 4vw; width: 50vw">
                              <!-- style="z-index: 6; position: relative; width:1000px; padding:8px" >  -->
        <div class='splitGrid'>
            <span class='sysTitle' id='info_description'>Attribute Description</span>
            <span class='close sysHover' style="text-align: right; padding-top: 12px;" onclick="hideId('attribute-popup')"> close ‚ùå </span>
            </div>
        <!-- VALUES -->  <p>
            <div class='sysHeader'>           Values   </div>
            <div class='infoLinksGrid'><span> Undo     </span> <span id='info_undo'          class='sysRed'></span></div>
            <div class='infoLinksGrid'><span> Default  </span> <span id='info_default'       class='sysRed'></span></div>
            </p>
        <!-- NAMES -->   <p>
            <div class='sysHeader'>          Attribute   </div>
            <div class='infoDescGrid'><span> name      </span> <span id='info_attribute_name' class='sysRed'></span>
                                                               <span id='info-name-sample'>                  </span></div>
            <div class='infoDescGrid'><span> .style    </span> <span id='info_style_name'     class='sysRed'></span>
                                                               <span id='info-style-sample'>                 </span></div>
            <div class='infoDescGrid'><span> var()     </span> <span id='info_variable_name'  class='sysRed'></span>
                                                               <span id='info-var-sample'>                   </span></div>
            </p>
        <!-- SEARCH -->  <p>
            <div class='sysHeader'>          Help     </div>    <!-- search buttons title -->
            <div class="infoLinksGrid">
                <span   id='info_name'          class="sys-red"  >              </span>
                <button id='info_documentation' class='sysButton'> Publications </button> <!-- bodyLoaded() sets onclicks --> 
                <button id='info_samples'       class='sysButton'> Samples      </button> 
                <button id='info_tutor'         class='sysButton'> Tutorials    </button> </div> 
            </p>
        <!-- OPTIONS --> <p>
            <div class='sysHeader'>          Options  </div>    <!-- attribute options search area -->
            <div id='info_options'></div>
            </p>
        </div>
    <!-- -------------------------------------------------------------- -->
    <div id='editStyle'      class='system' draggable="true" ondragstart='dragElement(event)' hidden
                             style=" z-index: 4; position: relative; top: 20px; left: 48vw; width: 50vw">
        <div class='splitGrid'>
            <span class='sysTitle' id='stylize_element'>Stylize Element</span>
            <span class='close sysHover' style="text-align: right; padding-top: 12px;" onclick="hideId('editStyle')"> close ‚ùå </span>
            </div>
        <div id='edit-columns' class='editColumnsGrid'></div>
        </div>


    <!-- -------------------------------------------------------------- -->
    <div id="displayCSS"      class='system' draggable='true' ondragstart='dragElement(event)' hidden
                             style=" z-index: 8; position: relative; top: 20px; left: 4vw; width: 50vw">
                              <!-- style='z-index: 8; position: relative; color: wheat; top:20px; left:0'>  -->
        <div class='splitGrid'>
            <span class="sysTitle">CSS</span>
            <span class='close sysHover' style="text-align: right; padding-top: 12px;" onclick="hideId('displayCSS')">    close ‚ùå </span>
        </div>
        <div class="sysHeader">Description</div>
        <div><p>Providing the current layout and theme settings in CSS format for saving as a file or cut and paste.</p></div>
        <div class="sysHeader">Instructions</div>
        <div>
            <ol>
                <li>Optionally select Root</li>
                <li>Or optionally select theme only and provide a Theme name</li>
                <li>Optionally select to also include .class statements</li>
                <li>Optionally edit the reults. Edits will only apply to your copy or save.</li>
                <li>Select Create to see any chnges</li>
                <li>Optionally edit the CSS results as needed</li>
                <li>Select Copy to the clipboard or Save as file</li>
            </ol>
            </div>
        <div>
            <span style="display: inline-block;">
                <input type="radio"    id='rootSelect'    name="themeNameSelect" checked>
                <label                for='rootSelect'>                             Root theme    </label><br>
                <input type="radio"    id='themeSelect'   name="themeNameSelect">
                <label                for='themeSelect'>                            Named theme    </label>
                <input type="text"  class='sysSelect'     name="themeNameSelect"><br>
                </span>
            <span style="display: inline-block;">
                <input type="checkbox" id='includeClass'  name="includeClasses"  checked>
                <label                for='includeClass'>                           Include .class</label><br>
                <input type="checkbox" id='includSystem'  name="includeClasses" >
                <label                for='includSystem'>                           Include separate system theme</label><p>
                </span>
            </div>
        <p>
            <button   class='sysButton sysDesc'>                                    Copy</button>
            <button   class='sysButton sysDesc'>                                    Save</button>
            </p>
        <textarea style="font-family: monospace; width: 100%; height: 50vh; padding: 8px">
        Sample of Future Generated Results
        
            :root   {
            --font-size:            24px;
            --font-weight:          400;
            --title-font-size:      24px;
            --title-font-weight:    400;
            }
            .body {
                font-size:          var(--font-size);
                font-weight:        var(--font-weight);
            }
            .title {
                font-size:          var(--title-font-size);
                font-weight:        var(--title-font-weight);
            }
            </textarea>
    
        </div>
    <!-- -------------------------------------------------------------- -->
    <!--                       USER EDITABLE GUI ELEMENTS               -->
    <!-- -------------------------------------------------------------- -->
    <div style='position: absolute; top: 25px; left: 0; width:  97vw; height: 100vh; z-index: 1;'>
                                                                                            <!-- EDITABLE ELEMENTS   -->
            <div  onclick="showEdit('title')"      class='title'>   Title       </div>      <!-- Title       -->
            <div  onclick="showEdit('description')"class='desc'  >  Description </div>      <!-- Description -->
            <span onclick="showEdit('')">                                                   <!-- Defaults    -->
                <hr>
                <p>Click on an element such as 'Title' or here to edit its style.</p>
                <p>The undo column and button describe the current values before changes.
                Changed values become permenent when another element is edited.
                Changed values will become the new undo values when the element is edited again. </p>
                <ul>
                    <li>ALL CAP FONT EXAMPLE                    </li>
                    <li>all lowercase font example: qpdbgytif   </li>
                    <li>Number &gt; 0O  &lt; letter compare     </li>
                    <li>Number &gt; 1lL &lt; letters compare    </li>
                    <li>HEX Sample: #b6a0f5                     </li>
                </ul>
                <p>Let's create something nice today.  Even nicer than yesterday.  
                Brighter, with a softer contrast.</p>
                </span>
                </div>

</div> <!-- end gui-panel & Popup drop zone -->

<!-- ################################################################## -->
<!--                             JAVASCRIPT                             -->
<!-- ################################################################## -->
<script type="text/javascript">
    // console.clear();

    // const info_description = document.getElementById('info_description');

    const theme     = 'data-theme';
// ==============================================================
// save objects - Save and restore user settings and attributes on page repoad

    var   user   = { classNames: [],         // GUI input created context names  --'context'-attribute-name
                     root:       [],         // attribute change records (themes.css overrides)
                     settings:   [] }        // site settings - TBD
    class PAIR     { name = '';  val = '' }  // generic name value pair for root records

// ==============================================================
// function() PARAMETERS
// ---------------------
// attr_ctrl - Object having an attribute description, limits, attribute values, default value..
// context   - Current attribute variable name prefix like 'myTitle' to represent a unique CSS .class, tag name, etc. 
//             i.e. .title { font-size: var(--title-font-size) } | unspecified context = var(--font-size)
// var_name  - full :root variable name composed of passed context and attribute name.  i.e. --title-font-size
//
// Modify    - Optionally add a unique name to contexts[array] to generate --uniqueName-attribute-name variables in CSS :root
//           - Class names created using the GUI input are saved in users local storage and restored on page reload 
//           - Use generate CSS theme option to display ALL current variables and values
//           - The generated theme can then be copied into your CSS.  

    const contexts   = ['', 'title', 'description', 'subtitle', 'button', 'input', 'radio', 'checkbox', 'textarea', 'div', 'span', 'hr' ]; // ==> --title-font-size, --desription-font-size

    const old_attr_ctrls = [         // attr_ctrl list

        // attr_ctrl parameter table array                                                       
        // A table entry for each attribute providing needed information and controls for: 
        // 1. Generating HTML elements for changing attribute values      - genEdit()
        // 2. Creating and modifying the :root attribute variable value   - chgAttr() 

        // TO BE DONE - genEdit() HTML control generator currently uses the following list to generate example test controls. 
        //              Each attribute control object 'attr_ctrl' is reusable for attributes having the same options or limits.
        //              Non unique control fields will be moved to a full attribute variable list for genEdit() processing
        //              The future full attribute list will reference an appropriate 'attr_ctrl' below. 
        //              Defaults are unique to a browser and may differ between elements - future resolution

        { attr: 'color',           description: 'Font Color',       default: 'not specified',  type: 'color' },
        { attr: 'background-color',description: 'Background Color', default: 'not specified',  type: 'color' },
        { attr: 'font-size',       description: 'Font Size',        default: '16px',   min: 4, max:200,  inc: 2, suffix: 'px' },  
        { attr: 'font-family',     description: 'Font Family',      default: 'New Times Roman', options: ['Arial', 'Microsoft Sans Serif', 
                          'Lucida Console', 'Lucida Sans Unicode', 'monospace', 'system-ui', 
                          'Segoe UI', 'Tahoma', 'Trebuchet MS', 'Comic Sans MS', 'cursive', 'Candara', 'Copperplate Gothic', 'Malgun Gothic', 
                          'Helvetica', 'Corbel', 'Calibri', 'Bahnschrift', 'fantasy', 'Impact', 'Ink Free', 'Gabriola', 'Segoe Print', 
                          'Segoe Script', 'Webdings', 'Wingdings', 'Symbol', 'Marlett', 'SimSun', 'NSimSun', 'Veranda', 'Georgia', 
                          'ui-monospace', 'Aharoni', 'Cambria', 'Dotum',  'Aldhabi', 'Palatino', 'Calisto MT', 'David', 'ui-serif', 
                          'ui-sans-serif', 'ui-rounded', 'Times', 'New Timmes Roman', 'OCR-A Extended', 'math', 'Cambria Math', 'emoji', 'KaiTi', 
                          'Batang', 'Vrinda', 'Tunga', 'Simplified Arabic', 'Arabic Typesetting', 'Andalu', 'Simhe', 'Sakkai Majalla', 
                          'MS Mincho', 'MS PMincho', 'MoolBoran', 'Microsoft MingLIU', 'Microsoft JhengHe', 'Mangai', 'lilyUPC', 'Leelawadee', 
                          'Latha', 'KodchiangUPC', 'Khmer UI', 'IrisUPC', 'Iskoola Pota', 'JasmineUPC', 'Javanese Text', 'Gungsuh', 'Gulim', 
                          'Gautami', 'DokChampa', 'DFKai-SB', 'DaunPenh', 'CordiaUPC', 'Cordia New', 'BrowalliaUPC', 'Browallia New', 
                          'Angsana New', 'AngsanaUPC', 'fangsong' ] }, // fontFamily  
        { attr: 'font-style',      description: 'Font Style',       default: 'normal', options: ['italic', 'normal'] },
        { attr: 'font-weight',     description: 'Font Weight',      default: '400',    options: [ '100', '400', '700', '900', 'inherit' ] },
        { attr: 'margin',          description: 'Margin',           default: '0px',    min: 0, max:1000,  inc: 2, suffix: 'px' }
        ] // attr_ctrls


    // attr         - HTML DOM object attribute name
    // description  - Attribute description
    // default      - browser or element atrribute default value
    // style        - obj.style.attribute name for javascript reference
    // type         - used to detect no option processing such as a color picker instead
    // options      - attribute options list, what the attribute can be set to
    // min,max,inc  - numeric limits and increment amount
    // suffix       - numeric suffix options like 'px' 'fr'

    const attr_ctrls = [                                                                                               // unique controls 
        { attr: 'color',           description: 'Font Color',       default: 'not specified',  style: 'color',            type: 'color' },
        { attr: 'background-color',description: 'Background Color', default: 'not specified',  style: 'backgroundColor',  type: 'color' },
        { attr: 'font-size',       description: 'Font Size',        default: '16px',           style: 'fontSize',         min: 4,  max:200,  inc: 2, 
                                   suffix: ['', 'px', 'em', 'rem', 'ex', 'vh', 'vw', 'vmin', 'vmax', 'lh', '%', 'pt', 'pc', 'cm', 'mm', 'q', 'in', 'fr'] },
        { attr: 'font-family',     description: 'Font Family',      default: 'New Times Roman',style: 'fontFamily',       options: [ 'monospace', 'Lucida Console', 'Lucida Sans Unicode', 
                          'Microsoft Sans Serif','Segoe UI', 'Arial', 'Tahoma',   
                          'Candara', 'Copperplate Gothic', 'Malgun Gothic', 'system-ui', 
                          'Trebuchet MS', 'Helvetica', 'Corbel', 'Calibri', 'Bahnschrift',
                          'Gabriola', 'Segoe Print', 'Segoe Script',
                          'Comic Sans MS', 'cursive', 'Ink Free', 'Impact', 'fantasy', 'Webdings', 'Wingdings', 'Symbol' ] },
        { attr: 'font-style',      description: 'Font Style',       default: 'normal',         style: 'fontStyle',        options: ['italic', 'normal'] },
        { attr: 'font-weight',     description: 'Font Weight',      default: '400',            style: 'fontWeight',       options: [ '100', '400', '700', '900', 'inherit' ] },
        { attr: 'margin',          description: 'Margin',           default: '0px',            style: 'margin',           min: 0, max:1000,  inc: 2, suffix: ['px'] }
        // : { attr: '',           description: '',       default: '',   style: '.style.',  type: '', undo:''},
        // : { attr: '',           description: '',       default: '',   style: '.style.',  type: '', undo:''},
        // : { attr: '',           description: '',       default: '',   style: '.style.',  type: '', undo:''},
        // : { attr: '',           description: '',       default: '',   style: '.style.',  type: '', undo:''},
        // : { attr: '',           description: '',       default: '',   style: '.style.',  type: '', undo:''},
        ]

    const numberSuffix = ['', 'px', 'em', 'rem', 'ex', 'vh', 'vw', 'vmin', 'vmax', 'lh', '%', 'pt', 'pc', 'cm', 'mm', 'q', 'in', 'fr'];

    // OLD attr_ctrls Limits Parameters for reference
            // const lineHeight = { min:   1, max:999, inc:0.2,suffix: 'px' }  // sp btween lines [1.1->1.2 avg.]
            // const textMargin = { min:   0, max:250, inc: 1, suffix: 'px' }  // margin & padding
            // const textShadow = { min: -20, max: 20, inc: 1, suffix: 'px' }  // shadow position
            // const textBlur   = { min:   0, max: 60, inc: 2, suffix: 'px' }  // blur radius
            // const wordSpace  = { min:   0, max: 20, inc: 1, suffix: 'px' }  // word spacing
            // const textOverflow = [ 'ellipsis', ' cont...', ' ..more.. ', '', 'clip' ]            // text-overflow: 
            // const overFlow     = [ 'hidden', 'visable', 'scroll', 'auto'];
            // const overFlowWrap = [ 'break-word', 'anywhere', 'normal']
            // const overFlowX    = [ 'hidden', 'visable' ];
            // const writeMode    = [ 'vertical-rl', 'horizontal-tb'];          // writing-mode: horizontal-tb;
            // const wordWrap     = [ 'break-word', 'anywhere', 'normal'];      // word-wrap:  normal; default; 
            // const wordBreak    = [ 'keep-all', 'break-all'];                 // word-break:
 

// ==============================================================
// genEdit() - Create and display attribute edit control knobs for changing the current style attribute values of a clicked HTML element

    // PURPOSE: Create and display attribute edit controls and values for a clicked HTML element. id='edit_controls'
    // 
    // 
    // FLOW :   ,----------------------------------------------------------------------------------
    //          | onclick() - click  an editable user HTML element like 'Title' was clicked
    //          |           - calls  showEdit() event handler
    //          | ,--------------------------------------------------------------------------------
    //          | | showEdit() - event handler
    //          | |            - show  edit controls popup HTML element id='edit_controls' previously hidden
    //          | |            - save  any prior element changes recorded in the 'user' object by chgAttr()
    //          | |            -       to local stroage in event of page refresh that will restore saved changes
    //          | |            - call  genEdit()
    //          | | ,------------------------------------------------------------------------------
    //          | | | genEdit() - generate  column header html DOM elements for the browser to display
    //          | | |           - loop      on all attr_ctrl's in the attr_ctrls array :
    //          | | |           -           call genEditHTML() for each attr_ctrl (attribute) 
    //          | | | ,---------------------------------------------------------------------------- 
    //          | | | | genEditHTML() - generate  
    //          | | | |               -
    //          | | | |               -
    //          | | | |               -
    //          | | | |               -
    //          | | | |               -

    // ONCLICK EVENT HANDLER

    function showEdit(context) {

        // hideId('gui-panel');
        // showId('wait');

        p('\nshowEdit('+context+')');

        save();             // save any prior element changes to local storage in the event of page refreash and restore changes
        showId('sysMenu');  // show system menu on top
        genEdit(context);   // generate HTML controls for editing new context element attribute values
        showId('editStyle');
        }

    // GEN HEADER + LOOP ALL ATTRIBUTES

    function genEdit(context) {                                 // create all edit controls and attributes for a specified element
        p('\ngenEdit() element context: '+context);  // --font-size, OR --title-font-size, OR --footer-font-size 

            // initialize control columns to empty

        let columns = document.getElementById('edit-columns');   // clear all prior element controls including grid elements
        columns.innerHTML = '';
        columns.style.setProperty('color', 'var(--sys-white)', 'important');         // set title text color with important inheirit override

            // initialize control area headers

        let header_column       = newDOM(columns,'SPAN');
        setClass(header_column,'sysDesc', 'on');    // font
        setClass(header_column,'sysHeader', 'on');  // background color
        header_column.style.setProperty('background-color', 'var(--sys-brown)', 'important');
        header_column.innerHTML = 'Info';

        header_column           = newDOM(columns,'SPAN');
        setClass(header_column,'sysDesc', 'on');    // font
        setClass(header_column,'sysHeader', 'on');  // background color
        header_column.style.setProperty('background-color', 'var(--sys-brown)', 'important');

        let title               = newDOM(header_column,'SPAN');
        title.id                = 'edit_title';
        if (context == '')     {title.innerHTML = 'BODY edit'; context = ''}      // no unique css class or tag overide  --font-size 
        else                   {title.innerHTML = context.toUpperCase()+' edit' } // display context {title, div, etc}   --title-font-size
        title.style.setProperty('color', 'var(--sys-white)', 'important');        // set title text color with important inheirit override
        title.style.setProperty('background-color', 'var(--sys-brown)', 'important');

        header_column           = newDOM(columns,'SPAN');
        setClass(header_column,'sysDesc', 'on');  // font
        setClass(header_column,'sysHeader', 'on');  // background color
        header_column.style.setProperty('background-color', 'var(--sys-brown)', 'important');
        header_column.innerHTML = 'Changes';

            // loop - display all attributes for editing

        for (let attr = 0; attr < attr_ctrls.length; attr++) {     
            genEditHTML(attr_ctrls[attr], context);         }      // call genEditAttrs for each css attribute found in attr_ctrls table

        hideId('wait');
        showId('gui-panel');
        }

    // ATTRIBUTE PROCESSOR

    function genEditHTML(attr_ctrl, context) {                  // create edit controls and results for one css attribute
        p('----------- loop\ngenEditAttrs('+attr_ctrl.attr+', '+context+')');

            // construct the attribute context root variable name

        let                    var_name  = '--'+attr_ctrl.attr;               // i.e. attribute var_name = '--font-size'
        if (passed(context)) { var_name  = '--'+context+'-'+attr_ctrl.attr }  // i.e. attribute var_name = '--title-font-size'
        p(' root variable name: '+var_name);
        p(attr_ctrl);

        // Create HTML edit control knobs, descriptions, & values 

        let description, knobs, color_picker, values, output;

        let columns = document.getElementById('edit-columns');

        // attribute description column with info popups  ('Color', 'Background Color', 'Border Color', etc.)               col 1 INFO

        description              =  newDOM(columns, 'DIV');   // create attribue descriptor as grid column 1  
        description.innerHTML    =  attr_ctrl.description;    // display attributes description
        description._attr_ctrl   =  attr_ctrl;
        description._var_name    =  var_name;
        description.style.setProperty('font-family', 'var(--sys-fancy)', 'important'); //  set font_family
        setClass(description, 'sysHover', 'on');
        description.onclick      =  function (e) {
                                        let elem = e.currentTarget;
                                        p('\nonClick() '+elem._var_name+' '+elem._attr_ctrl.attr); 
                                        attribute_info_popup(elem._var_name, elem._attr_ctrl); // desc last
                                        }

        // attribute edit controls column                                                                                   col 2 CONTROL KNOBS

        switch(attr_ctrl.type) {
            case 'color': 

                    // Control Knobs column

                    knobs                   = newDOM(columns, 'DIV');   // create attribue edit buttons as grid column 2

                    // Color Picker HTML

                    color_picker            = newDOM(knobs, 'INPUT');   // color control button on right
                    color_picker.type       = 'color';                  // set input dom type
                    color_picker.id         = var_name+'_color';        // set id for javascript reference
                    color_picker._attr_ctrl = attr_ctrl;                //? save attr_ctrl in color picker object for needed onchage() reference
                    color_picker._var_name  = var_name;
                    p(' current root color: '+getRoot(var_name).replace(/\s/g,''))
                    if (exist(getRoot(var_name).replace(/\s/g,''))) {
                        color_picker.value  = getRoot(var_name).replace(/\s/g,'');   // get current attribute value from :root --variable
                        color_picker.defaultValue = color_picker.value;            } // set picker to current color                    
                    setClass( color_picker, 'sysInput' );                                      
                    color_picker.onchange   = function(e) { 
                                                let colorPicker = e.currentTarget;
                                                chgAttr(colorPicker._var_name,colorPicker._attr_ctrl, 'save', colorPicker.value);  } 
                    // Undo button HTML

                    let undo_button         = newDOM(knobs, 'SPAN');                   
                    setClass( undo_button, 'sysButton' );               // assign style as button class
                    undo_button.innerHTML   = 'undo';                   // display button name
                    undo_button._attr_ctrl  = attr_ctrl;                // save attr_ctrl in color picker object for needed onchage() reference
                    undo_button._context    = context;
                    undo_button._var_name   = var_name;
                    undo_button._valueName  = getRoot(var_name);        // get current attribute value from :root --variable
                    undo_button.onclick     = function(e) { 
                                                let undoButton = e.currentTarget; 
                                                chgAttr( undoButton._var_name,    undoButton._attr_ctrl,      'save', undoButton._valueName)  }
                    // Transparant button HTML

                    let trans_button        = newDOM(knobs, 'SPAN');                   
                    setClass( trans_button, 'sysButton' );              // assign style as button class
                    trans_button.innerHTML  = 'transparent';            // display button name 
                    trans_button._attr_ctrl = attr_ctrl;                // save attr_ctrl in color picker object for needed onchage() reference
                    trans_button._context   = context;
                    trans_button._var_name  = var_name;
                    trans_button.onclick    = function(e) { 
                                                let transButton = e.currentTarget; 
                                                chgAttr( transButton._var_name,    transButton._attr_ctrl,      'save', 'transparent')  } 
                    break;

            default:      p('default');
                    ctrl_knobs      = newDOM(columns, 'DIV');     
                    description.style.setProperty('font-family', 'var(--sys-fancy)', 'important'); // overide font family 
                    // setClass(description, 'sysFancy');

                    // NUMBER VALUE PASSED
                    if (exist(attr_ctrl.min)) {                   // number - create buttons & measurement suffix 
                        p('numeric values');
                        let up_button       = newDOM(ctrl_knobs, 'SPAN');      //  for changing numeric attribute values
                        let down_button     = newDOM(ctrl_knobs, 'SPAN');
                        let undo_button     = newDOM(ctrl_knobs, 'SPAN');
                        let default_button  = newDOM(ctrl_knobs, 'SPAN');
                        setClass(     up_button,    'sysButton' );
                        setClass(   down_button,    'sysButton' );                    
                        setClass(   undo_button,    'sysButton' );
                        setClass(default_button,    'sysButton' );
                             up_button.innerHTML    = 'ü†ù';                    // display button text
                           down_button.innerHTML    = 'ü†ü';                    // ü†ù ü†ü ü†ú ü†û
                           undo_button.innerHTML    = 'undo'; 
                        default_button.innerHTML    = 'default';
                             up_button._attr_ctrl   = attr_ctrl;              // make 'attr_ctrl' object accessable
                           down_button._attr_ctrl   = attr_ctrl;              //   to onClickk function below //? a standard way to pass vars?
                           undo_button._attr_ctrl   = attr_ctrl;
                        default_button._attr_ctrl   = attr_ctrl;
                             up_button._context     = context;                // make 'context' variable accessable
                           down_button._context     = context;                //   to onChange function below
                           undo_button._context     = context;
                        default_button._context     = context;
                             up_button._var_name    = var_name;               // make context variable name accessable
                           down_button._var_name    = var_name;               //   to onChange function below
                           undo_button._var_name    = var_name;
                        default_button._var_name    = var_name;
                           undo_button._prior_val   = getRoot(var_name).toString();
                        default_button._default_val = attr_ctrl.default;
                        p(' attr: '+attr_ctrl.attr+', undo: '+undo_button._prior_val+', default: '+default_button._default_val);

                        up_button.onclick   = 
                            function(e) {                                    // DOM.attr_ctrl & 
                                            let upButton      = (e.currentTarget); //? test using 'this' 
                                            chgAttr( upButton._var_name,      upButton._attr_ctrl,    'increment', upButton._context)      } 
                        down_button.onclick = 
                            function(e) { 
                                            let downButton    = e.currentTarget; 
                                            chgAttr( downButton._var_name,    downButton._attr_ctrl,  'decrement', downButton._context)    } 
                        undo_button.onclick = 
                            function(e) { 
                                            let undoButton    = e.currentTarget; 
                                            chgAttr( undoButton._var_name,    undoButton._attr_ctrl,  'save', undoButton._prior_val)       } 
                        default_button.onclick = 
                            function(e) { 
                                            let defaultButton = e.currentTarget; 
                                            chgAttr( defaultButton._var_name, defaultButton._attr_ctrl,'save', defaultButton._default_val) }

                        // get current numeric suffix in use
                        let currentValue = getRoot(var_name).toString().replace(/[0-9,\s]/g,'');
                        p(' current '+var_name+' suffix: ['+currentValue+']');

                        // select
                        let suffixElem  = newDOM(ctrl_knobs, 'SELECT');
                        setClass(suffixElem, 'sysSelect' );
                        let optionElement; 
                        for (let suffixValue of attr_ctrl.suffix) {
                            p('create suffix option: ['+suffixValue+']');
                            optionElement = newDOM(suffixElem, 'OPTION');
                            optionElement.innerHTML = suffixValue;
                            setClass(optionElement, 'sysSelect'); 
                            if (suffixValue == currentValue) { optionElement.selected = true; p(suffixValue+' < selected')}
                            }
                        } // if number

                    // OPTION LIST PASSED    
                    if (exist(attr_ctrl.options)) {               // list   - create attribute options selector   
                        let up_button       = newDOM(ctrl_knobs, 'SPAN');        // UP     - DOM object
                        let down_button     = newDOM(ctrl_knobs, 'SPAN');        // DOWN   - DOM object
                        let undo_button     = newDOM(ctrl_knobs, 'SPAN');        // UNDO   - DOM object
                        let default_button  = newDOM(ctrl_knobs, 'SPAN');        // DEFAULT- DOM object
                        let options_select  = newDOM(ctrl_knobs, 'SELECT');

                        // set new control knobs attributes and values
                        setClass(     up_button,    'sysButton' );               // set classes in system element
                        setClass(   down_button,    'sysButton' );                    
                        setClass(   undo_button,    'sysButton' );
                        setClass(default_button,    'sysButton' );
                             up_button.innerHTML    = 'ü†ù';                       // display button text
                           down_button.innerHTML    = 'ü†ü';                       // ü†ù ü†ü ü†ú ü†û
                           undo_button.innerHTML    = 'undo'; 
                        default_button.innerHTML    = 'default';
                             up_button._attr_ctrl   = attr_ctrl;                 // store attributes parameters for event functions
                           down_button._attr_ctrl   = attr_ctrl;                 
                           undo_button._attr_ctrl   = attr_ctrl;
                        default_button._attr_ctrl   = attr_ctrl;
                             up_button._context     = context;                   
                           down_button._context     = context;                   
                           undo_button._context     = context;
                        default_button._context     = context;
                             up_button._var_name    = var_name;                  
                           down_button._var_name    = var_name;                  
                           undo_button._var_name    = var_name;
                        default_button._var_name    = var_name;
                           undo_button._prior_val   = getRoot(var_name).toString(); // make prior & default values accessable
                        default_button._default_val = attr_ctrl.default;

                        p(' attr: '+attr_ctrl.attr+', undo: '+undo_button._prior_val+', default: '+default_button._default_val);

                        // set button to call chgAttr() to change an attritute value
                        up_button.onclick      = function(e) { // DOM.attr_ctrl & 
                                                    let upButton      = (e.currentTarget); //? test using 'this' as ref to currentTarget 
                                                    p('onchange() upButton')
                                                    chgAttr( upButton._var_name,      upButton._attr_ctrl,      'increment', upButton._context)   } 
                        down_button.onclick    = function(e) { 
                                                    let downButton    = e.currentTarget; 
                                                    chgAttr( downButton._var_name,    downButton._attr_ctrl,    'decrement', downButton._context) } 
                        undo_button.onclick    = function(e) { 
                                                    let undoButton    = e.currentTarget; 
                                                    chgAttr( undoButton._var_name,    undoButton._attr_ctrl,    'save',      undoButton._prior_val) } 
                        default_button.onclick = function(e) { 
                                                    let defaultButton = e.currentTarget; 
                                                    chgAttr( defaultButton._var_name, defaultButton._attr_ctrl, 'save',      defaultButton._default_val) } 

                        // generate all attribute options
                        setClass(options_select, 'sysSelect');
                        for (option_ix=0; option_ix<attr_ctrl.options.length; option_ix++) {
                            let option          = newDOM(options_select, 'OPTION');
                            option.innerHTML    = attr_ctrl.options[option_ix];
                            setClass(option, 'sysSelect');
                            if (attr_ctrl.attr == 'font-family') { option.style.fontFamily = attr_ctrl.options[option_ix]}
                            }
                        } 
  
            } // end specific cases switch 

        // changed attribute column - display '.' as placeholder for changed attribute values                               col 3 CHANGES

        values               = newDOM(columns, 'DIV');            // right side div - attribue changed value 
        output               = newDOM(values,         'SPAN');    // attribute changed value on right
        output.innerHTML     = '.';                               // empty character until changed
        output.id            = attr_ctrl.attr+'_change';          // set id for javascript reference
        // setClass(output,'sysText');                               // style value as system text
        setClass(output,'sysRed');                                // style value using system color
        setClass(output,'selectText');                            // make value selectable for cut and paste     

        return;
        }

// ==============================================================
// chgAttr() onchange - Create or update an attribute :root --variable value 

    function chgAttr(contextAttr, attr_ctrl, command, multiParm) {
        // contextAttr - full attribute variable name i.e. --font-size, --title-font-size
        // attr_ctrl   - an entry from attr_ctrls[] with create and change controls, limits, options..
        // command     - 'save' the passed value, or 'incr', 'decr' a number or option array value   
        // multiParm   - a value to save or TBD
        p('\nchgAttr('+contextAttr+', '+attr_ctrl.attr+', '+command+', '+multiParm+')');
        let val, nuVal, ix;

        // SAVE PASSED VALUE FOR RELOADs
        if (command == 'save')   { // SAVE PASSED VALUE,
            nuVal = multiParm;     // save value was passed in multiParm    
            setRoot(contextAttr,nuVal);     
            document.getElementById(attr_ctrl.attr+'_change').innerHTML = nuVal;                 
            }
        // ELSE SAVE NEXT VALUE IN OPTION LIST
        else if (exist(attr_ctrl.options)) {
            // GET THE VALUEs POSITION INDEX IN THE PASSED OPTION LIST
            val = getRoot(contextAttr).toString();                          // get curr value, with whitespace
            p('chgAttr() prior value ['+val+']');
            ix  = attr_ctrl.options.indexOf(val);                           //
            if (ix == -1) { ix=0; warn('current value ['+val+'] not found in list:\n '+attr_ctrl.options)    }
            // GET THE VALUEs NEXT OPTION IN THE PASSED OPTION LIST
            if         (ix == attr_ctrl.options.length-1 && command === 'increment') {ix = 0}
            else if    (ix == 0                          && command === 'decrement') {ix = attr_ctrl.options.length-1}
            else if    (command === 'decrement')                                     {ix--}
            else if    (command === 'increment')                                     {ix++}
            else {}
            nuVal = attr_ctrl.options[ix];
            // UPDATE :ROOT --VARIABLE & DISPLAY VALUE IN CHANGES COLUMN
            setRoot(contextAttr,nuVal);                                     
            document.getElementById(attr_ctrl.attr+'_change').innerHTML = nuVal; 
            }
        // ELSE INCREMENT NUMBER VALUE & SAVE
        else if (exist(attr_ctrl.min)) { 
            // GET THE ATTRIBUTES s CURRENT VALUE
            val = parseFloat(getRoot(contextAttr).toString());                       // get curr numeric value from :root (note: .replace(/\s/g,'')
            suffix = 'px';                                                           // !! temp - change to get suffix from <select> !!
            p('chgAttr() prior numeric value ['+val+']');
            // INCREMENT OR DECREMENT NUMBER
            if         (command === 'increment')  {val = val + attr_ctrl.inc}
            else if    (command === 'decrement')  {val = val - attr_ctrl.inc}
            else       {error('chgAttr() invalid command '+command)}
            if         (val < attr_ctrl.min) {val = attr_ctrl.max}
            if         (val > attr_ctrl.max) {val = attr_ctrl.min}
            // APPEND MEASUREMENT SUFFIX
            nuVal = val+suffix;
            // UPDATE :ROOT --VARIABLE & DISPLAY VALUE IN CHANGES COLUMN
            setRoot(contextAttr,nuVal);                                     
            document.getElementById(attr_ctrl.attr+'_change').innerHTML = nuVal; 
            }
        else    {error('chgAttr() unknown request type')}
        // SET ATTRRIBUTE & VALUE IN A LOCAL STORAGE ROOT REC FOR RELOAD
        let rec =  user.root.find(o => o.name.toString() === contextAttr.toString()); // find existing :root --variable change record
        if (typeof rec === 'undefined') {                                             // create new    :root --variable change record
            rec          =  new PAIR;
            rec.name     =  contextAttr;
            user.root.push(rec)          
            p('new change record for '+contextAttr)}
        rec.val = nuVal;

        // setRoot(css_name, nuVal);

        p('rec:  '+rec.name+': '+rec.val);
        p('root: '+rec.name+': '+getRoot(contextAttr.toString()));
        
        }

//===============================================================
// attribute_info_popup() - display attribute information

    // get attribute_info_popup() elements needing to be fill in ( elements obtained once on page load )

    const infoDesc        = document.getElementById('info_description');      
    const infoAttrName    = document.getElementById('info_attribute_name');  // get elements once on page load for performance
    const infoVarName     = document.getElementById('info_variable_name');   //   instead of each time the function is called
    const infoStyleName   = document.getElementById('info_style_name');
    const infoUndo        = document.getElementById('info_undo');
    const infoName        = document.getElementById('info_name');
    const infoDefault     = document.getElementById('info_default');
    const infoAttrOptions = document.getElementById('info_options');
    const infoDocs        = document.getElementById('info_documentation');
    const infoSamples     = document.getElementById('info_samples');
    const infoTutors      = document.getElementById('info_tutor');
    const infoNameSample  = document.getElementById('info-name-sample' );
    const infoVarSample   = document.getElementById('info-var-sample'  );
    const infoStyleSample = document.getElementById('info-style-sample');

    // Update attribute valus in the popup elements and display the popup

    function attribute_info_popup(var_name, attr_ctrl) {
        p('attribute_info_popup('+var_name+', '+attr_ctrl.attr+')');

        // FILL IN UNDO & DEFAULT VALUES
        infoUndo.innerHTML          = getRoot(var_name);        // set undo    value in html element
        infoDefault.innerHTML       = attr_ctrl.default;        // set default value in html element

        // FILL IN ATTRIBUTE, VAR, STYLE NAMES & SAMPLE USE
        infoDesc.innerHTML          = attr_ctrl.description;    // set attribute description
        infoAttrName.innerHTML      = attr_ctrl.attr;           // set attribute name
        infoVarName.innerHTML       = var_name;                 // set attribute variable name
        infoStyleName.innerHTML     = attr_ctrl.style;          // set attribute style name for js reference
        infoNameSample.innerHTML    = '.myClass { <red>'+attr_ctrl.attr+'</red>: '+attr_ctrl.default+' }'
        infoVarSample.innerHTML     = '.myClass { '+attr_ctrl.attr+': var(<red>'+var_name+'</red>) }<br>:root { <red>'+var_name+'</red>: '+attr_ctrl.default+'; }'
        infoStyleSample.innerHTML   = 'document.getElementById(id).style.<red>'+attr_ctrl.style+'</red> = "'+attr_ctrl.default+'";'

        // FILL IN ATTRIBUTE SEARCH DOCS, SAMPLES, TUTOR WALKTHROUGH BUTTONS
        infoName.innerHTML          = attr_ctrl.attr;           // set attribute name
        infoDocs._attribute_name    = attr_ctrl.attr;           // set documents search button parameter to the attribute name
        infoSamples._attribute_name = attr_ctrl.attr;           // set samples   search button parameter to the attribute name
        infoTutors._attribute_name  = attr_ctrl.attr;           // set tutors    search button parameter to the attribute name
 
        // ATTRIBUTE OPTIONS LOOP - CREATE SEARCH DOCS, SAMPLES, TUTOR WALKTHROUGH BUTTONS
        infoAttrOptions.innerHTML   = ''; // clear prior attribute options before appending new options
        let wrapperObj, optionObj, docObj, sampleObj, tutorObj; // LOOP - Display Attribute Options and their search buttons
        if (exist(attr_ctrl.options)) {                         // if the attribute has a option list
            for (let i=0; i<attr_ctrl.options.length; i++) {    //    then loop through its options

                wrapperObj          = newDOM(infoAttrOptions,'DIV');    // Create a Option container
                setClass(wrapperObj,'infoLinksGrid','on');              // assign a column grid for the wrapper contents below
    
                optionObj           = newDOM(wrapperObj,'SPAN');        // Create the options Name element in the above container 
                optionObj.innerHTML = attr_ctrl.options[i];             // Display the option name in the button
                setClass(optionObj,'sysRed','on');                      // make the option name red by setting a red css style class name

                docObj              = newDOM(wrapperObj,'button');      // Create search Documentation button in the container
                docObj.innerHTML    = 'Publications';                   // Display 'Publications' as the button title 
                docObj._attribute_name = attr_ctrl.options[i];          // create and set attribute name in button object as a parameter for onclick()
                setClass(docObj,'sysButton','on');                      // make it look like a button by setting a css button style class name
                docObj.onclick = function (e) { let obj = e.currentTarget; searchSites(obj._attribute_name, info_sites)   } // make the button call a search function

                sampleObj           = newDOM(wrapperObj,'button');      // Create search Samples button in the container
                sampleObj.innerHTML = 'Samples';                        // Display 'Samples' as the button title 
                sampleObj._attribute_name = attr_ctrl.options[i];       // create and set attribute name in button object as a parameter for onclick()
                setClass(sampleObj,'sysButton','on');                   // make it look like a button by setting a css button style class name
                sampleObj.onclick       = function (e) { let obj = e.currentTarget; searchSites(obj._attribute_name, sample_sites)}// make the button call a search function
    
                tutorObj            = newDOM(wrapperObj,'button');      // Create search Tutorials button in the container
                tutorObj.innerHTML  = 'Tutors';                         // Display 'Tutors' as the button title 
                tutorObj._attribute_name = attr_ctrl.options[i];        // create and set attribute name in button object as a parameter for onclick()
                setClass(tutorObj,'sysButton','on');                    // make it look like a button by setting a css button style class name
                tutorObj.onclick         = function (e) { let obj = e.currentTarget; searchSites(obj._attribute_name, tutor_sites) }// make the button call a search function
                }
            }
        showId('attribute-popup'); // display the attribute info popup we just filled in
        }

// ==============================================================
// searchSites(arg, sites) onclick - search  site:github.com OR site:gitlab.com OR site:bitbucket.org after:2018-01-01

    const search_prefix =   'https://www.google.com/search?q=css DOM';

    const info_sites    = [ 'caniuse.com',        
                            'cssreference.io',
                            'getdocs.org',
                            'github.com/JaniRefsnes/w3css/blob/master/w3.css',
                            'www.w3.org',
                            'developer.mozilla.org'                            
                            ]; 
    const sample_sites  = [ 'github.com/w3dotdev',
                            'css-tricks.com',
                            'www.geeksforgeeks.org',
                            'stackoverflow.com',   
                            'www.w3.org',  
                            'www.codegrepper.com',   
                            'css-tricks.com',
                            'levelup.gitconnected.com',
                            'docs.w3cub.com',
                            'www.quackit.com',
                            'www.w3docs.com',
                            'help.dottoro.com',
                            'www.w3schools.com',
                            'www.w3programmers.com',
                            'codepen.io',
                            'drafts.csswg.org'
                            ]; 
    const tutor_sites   = [ 'www.csstutorial.net',
                            'w3cx.org',
                            'htmldog.com',
                            'www.tutorialbrain.com',
                            'www.w3resource.com/css',
                            'o7planning.org',
                            'www.tutorialrepublic.com',
                            'www.learn-html.org',
                            'www.freecodecamp.org',
                            'www.smashingmagazine.com',
                            'www.tutorialscan.com',
                            'css-tricks.com',
                            'elad.medium.com',
                            'www.youtube.com',
                            'www.tutorialbrain.com',
                            'developer.mozilla.org/en-US/docs/Learn/',
                            'www.enjoytutorials.com'
                            ];

    function searchSites(argument, site_list) {
        p('searchSites( '+argument+' )');
        let                                     sites =  ' site:'+site_list[0];
        for ( i=1; i<site_list.length; i++)   { sites += ' OR site:'+site_list[i] }
        search_string = search_prefix +' "'+ argument +'" '+ sites +' after:2015-01-01';
        p(search_string);
        window.open(search_string);
        } 
    
// ==============================================================
// exists() passed() - check if parameter exists             
 
    function exist(item)  { if (item == '0'         || item === 0)          { return true  }
                            if (item == 'undefined' || item == undefined ||
                                item == 'NaN'       || item == NaN       ||
                                item == 'null'      || item == null      ||
                                item === 'false'    || item === false    ||
                                item == ''          )                       { return false } // p('..exists('+item+') param type: '+typeof item+' does not exist');
                            else                                            { return true  } // p('..exists('+item+') does exist'    ); }
                            }
    function passed(item) { return exist(item) }
// ==============================================================
// getRoot() setRoot() - :root variable access               

    var root = document.querySelector(':root');

    function getRoot(name)     {
        var    styles=getComputedStyle(root);
        return styles.getPropertyValue(name);
        }
    function setRoot(name,val) {
        root.style.setProperty(name.toString(), val);
        // p('setRoot("'+name+'", "'+val+'") | now = "'+getRoot(name)+'"');
        }
// ==============================================================
// newDOM()  - generate new HTML element for a parent element

    function newDOM(parent, tag)  {
        // indent();
        console.log('newDOM( '+parent+', '+tag+' )');
        if (typeof parent == 'string') {
            try   { parent = document.getElementById(parent) }
            catch { error('Parent: '+parent+' not found in newDOM()')}
            }
        let elem       = document.createElement(tag);
        // elem.id        = rec.id;
        parent.appendChild(elem);
        // elem           = document.getElementById(id);
        // console.log(dent+'tool icon elem.id: '+elem.id);
        // undent();
        return elem;
        }
// ==============================================================
// SetClass() - action default = toggle                      

    function setClass(obj, class_name, action)    {
        if (exist(obj) && exist(class_name) == false)   {error('setclass missing parm'); return }

        // get obj exceptions
        if (obj == 'body')               {p('setClass() getByTag'); obj = document.getElementsByTagName(obj)[0] } 
        else if (typeof obj == 'string') {p('setClass() getById');  obj = document.getElementById(obj)          }
        else    {} // obj passed

        let status = 'the same as it was';
        if (action == undefined || action == 'toggle')  {
            obj.classList.toggle(class_name);         status = 'off';
            if (obj.classList.contains(class_name)) { status = 'on' }
            }
        else if (action == 'off' && obj.classList.contains(class_name)) {
            obj.classList.toggle(class_name);         status = 'off';
            }
        else if (action == 'on' && !obj.classList.contains(class_name)) {
            obj.classList.toggle(class_name);         status = 'on';
            }
        // p(obj.tagName+' optional object id: '+obj.id+' <- set class '+class_name+' optional action['+action+'] is now '+status);
        // TBD - update obj rec
        }
// ==============================================================
// show..() hide..() elements and named groups               

    function showId(id) {p('show('+id+')');
            let obj; 
            try { obj = document.getElementById(id) } catch {error('!!  showId() id: '+id+' not found')}
            p('showId('+id+') tag: '+obj.tagName);
            if (obj.tagName == 'SPAN' ) { obj.style.display = 'inline' }
            else                        { obj.style.display = 'block' }
            }
    function hideId(id) {p('hide('+id+')'); document.getElementById(id).style.display = 'none' }

    function hideBrothers(name)          {
            p('hideBrothers() '+name);
            if (exist(name)) {
                switch (name) {
                    case 'editRoot':     coll = document.querySelectorAll('[name = "editRoot"]'    ); break;
                    case 'editThemes':   coll = document.querySelectorAll('[name = "editThemes"]'  ); break;
                    default:             warn('!! hideBrothers() '+name+' not found')                  }
                p(coll.length+' '+typeof coll[0]+'(s) have the name of '+name);
                for (let elem = 0; elem < coll.length; elem++) { coll[elem].style.display = 'none'; }
                }
            else {warn('HideBrothers('+name+') not found')}
        }
    function showBrothers(name)          {
            p('showBrothers() '+name);
            if (exist(name)) {
                switch (name) {
                    case 'editRoot':     coll = document.querySelectorAll('[name = editRoot'    ); break;
                    case 'editThemes':   coll = document.querySelectorAll('[name = editThemes'  ); break;
                    default:             warn('!! hideBrothers() '+name+' not found')                  }
                p(coll.length+' '+typeof coll[0]+'(s) have the name of '+name);
                for (let elem = 0; elem < coll.length; elem++) { coll[elem].style.display = 'inline'; }
                }
            else {warn('HideBrothers('+name+') not found')}
        }
                                                //  name='editThemes' 
// ==============================================================
// get..() put..()                                           

    function getByName  (name)   { return document.getElementsByName(name) }
// =============================================================
// save()  read()  - local storage,                          

    // save user setting for future page load or refresh which reads and restores user settings

    function save() {                       // SAVE user changes for page reloads
        p(' save() - local storage');
        console.table(user);
        if (localStorage) { localStorage.setItem('user', JSON.stringify(user)); }
        }

    function read() {                       // READ user changes from storage on page load
        if (localStorage) { 
            p(' read() - local storage');
            try { results = JSON.parse(localStorage.getItem('user')); }
            catch                {  warn('read() - No stored user settings found'); return user } // return empty object
            if (!exist(results)) {  warn('read() - No prior user settings found' ); return user } // return empty object
            }
        return results;                                                                // return read  object
        }
// ==============================================================
// drag & drop - event handlers                              

    var offsetX = offsetY = 0;

    function dragElement(e) { e.dataTransfer.setData("text", e.target.id); p('<<< onDragStart >>> '+e.target.id);  
                              console.clear();
                              // e.clinetX e.clientY
                              let obj     = e.target;
                              let cursorX = e.clientX;
                              let cursorY = e.clientY;
                              let curleft = curtop = 0;
                              p('cursor X:'+cursorX+' cursor Y:'+cursorY+' obj left:'+obj.offsetLeft+' top:'+obj.offsetTop);
                              if (obj.offsetParent) { do { curleft   += obj.offsetLeft;
                                                           curtop    += obj.offsetTop;
                                                         } while (obj = obj.offsetParent)        }
                              offsetX = Math.abs(cursorX-curleft);
                              offsetY = Math.abs(cursorY-curtop )+document.getElementById('sysMenu').offsetHeight; // 22; 
                              p('offset left:'+offsetX+' offset top:'+offsetY);
                            }
    function dropZone(e)    { e.preventDefault(); }   
    function dropElement(e) { e.preventDefault();    
                              let cursorX           = e.clientX;
                              let cursorY           = e.clientY;
                              let id                = e.dataTransfer.getData("text");
                              let left              = cursorX-offsetX; //, 0);
                              let top               = cursorY-offsetY; //, 0);
                              dropObj               = document.getElementById(id);
                              dropObj.style.left    = left+'px';
                              dropObj.style.top     = top+'px';
                              }

// ==============================================================
// body onLoad                                            

    function bodyLoaded() {
        console.clear();
        p('bodyLoaded()')
        user = read();
        // Set Search Button event handlers
        // document.getElementById('info_documentation').onclick = function (e) { let obj = e.currentTarget; 
        //                                                                        searchSites(obj._attribute_name, info_sites)   }
        // document.getElementById('info_samples').onclick       = function (e) { let obj = e.currentTarget; 
        //                                                                        searchSites(obj._attribute_name, sample_sites)}
        // document.getElementById('info_tutor').onclick         = function (e) { let obj = e.currentTarget; 
        //                                                                        searchSites(obj._attribute_name, tutor_sites) }
        // Set System Theme
        document.documentElement.setAttribute(theme,'system');  // add system theme variables to root

        // Show Theme Editor Panel
        console.log('..BODY loaded');



                // <button id='info_documentation' class='sysButton' >
                //                         <!-- onclick="function (e) {let undoButton = e.currentTarget; searchSites(undoButton._attribute_name, 'doc_sites')   }"--> Publications   </button> -->
                // <button id='info_samples'       class='sysButton' >
                //                         <!-- onclick="function (e) {let undoButton = e.currentTarget; searchSites(undoButton._attribute_name, 'sample_sites')}"--> Samples </button> -->
                // <button id='info_tutor'         class='sysButton' >
                //                         <!-- onclick="function (e) {let undoButton = e.currentTarget; searchSites(undoButton._attribute_name, 'tutor_sites') }"--> 
        }

// ==============================================================
// p() - debug, consol.log                                                  

    const status = document.getElementById('status');
    function state(txt) {
        status.innerHTML = txt;
        }
    function p(txt)     {console.log(txt)}
    function error(txt) {console.error(txt)}
    function warn(txt)  {console.warn(txt)}

console.log('..HTML JavaScript loaded');
</script>
</body>
</html>
    
